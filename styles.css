:root{
  --bg:#0f0f12;
  --panel:#17171c;
  --text:#eef0f3;
  --muted:#a7adba;
  --primary:#60a5fa; /* blue */
  --accent:#4ade80; /* green */
  --danger:#ef4444; /* red */
  --outline:#2a2a32;
  --card:#1b1b22;
  --shadow:0 8px 20px rgba(0,0,0,.35);
  --radius:14px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* Top bar */
.topbar{
  position:sticky; top:0; inset-inline:0; z-index:50;
  display:flex; align-items:center; justify-content:space-between;
  gap:.75rem; padding:.75rem .9rem;
  background:linear-gradient(180deg, rgba(16,16,22,.9), rgba(16,16,22,.8));
  backdrop-filter:saturate(1.2) blur(8px);
  border-bottom:1px solid var(--outline);
}
.icon-btn{
  appearance:none; border:1px solid var(--outline);
  background:var(--panel); color:var(--text);
  padding:.55rem .7rem; border-radius:12px; font-size:1.1rem; line-height:1;
  box-shadow:var(--shadow); cursor:pointer;
}
.icon-btn[disabled]{opacity:.5; cursor:not-allowed}
.primary{
  background:var(--primary); color:white; border:none; padding:.65rem 1rem;
  border-radius:999px; font-weight:700; letter-spacing:.2px; box-shadow:var(--shadow);
}
.ghost{
  background:transparent; color:var(--text); border:1px solid var(--outline);
  border-radius:12px; padding:.55rem .9rem;
}

/* Content area */
.content{padding:1rem .9rem 2rem; max-width:560px; margin:0 auto}
.course-list{display:flex; flex-direction:column; gap:1rem}

/* Card */
.card{
  background:var(--card); border:1px solid var(--outline); border-radius:var(--radius);
  box-shadow:var(--shadow); padding:.9rem; position:relative;
}
.card-header{display:flex; align-items:center; justify-content:space-between; gap:.75rem}
.title{
  display:flex; align-items:center; gap:.5rem; font-weight:700; font-size:1.05rem;
}
.info-btn{width:1.6rem; height:1.6rem; border-radius:999px; display:grid; place-items:center; font-weight:900;
  background:#111318; color:#a7ffb6; border:1px solid var(--outline); cursor:pointer}
.info-btn:hover{filter:brightness(1.1)}
.course-code{letter-spacing:.2px}

/* Selectors */
.selector{
  --size:28px; min-width:var(--size); min-height:var(--size);
  display:grid; place-items:center; border-radius:10px; border:2px solid var(--primary);
  color:var(--primary); background:transparent; cursor:pointer; font-weight:800;
  transition:border-color .18s ease, color .18s ease, transform .12s ease;
  position:relative;
}
.selector.check{border-color:var(--accent); color:var(--accent)}
.selector.partial{border-color:#ffd166; color:#ffd166}
.selector.num{border-color:var(--accent); color:var(--accent)}
.selector.num.partial{border-color:#ffd166; color:#ffd166}
.selector .plus{font-size:18px}
.selector .dash{font-size:18px}
.selector.tapped{transform:scale(.92)}
.selector.pulse{animation:rankPulse .35s ease-out}

@keyframes rankPulse{from{box-shadow:0 0 0 0 rgba(74,222,128,.55)} to{box-shadow:0 0 0 12px rgba(74,222,128,0)}}

/* Tap progress overlay number */
.tap-hint{position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; font-weight:900; color:var(--primary); text-shadow:0 1px 2px rgba(0,0,0,.5); opacity:0; transform:scale(.6)}
.tap-hint.show{animation:tapHint .38s ease-out}
@keyframes tapHint{0%{opacity:0; transform:scale(.6)} 30%{opacity:1; transform:scale(1)} 100%{opacity:0; transform:scale(1.2)}}

.section-list{margin-top:.65rem; display:flex; flex-direction:column; gap:.5rem}
.section{display:flex; align-items:center; justify-content:space-between; gap:.5rem; padding:.55rem .6rem; border:1px dashed var(--outline); border-radius:10px}
.section .meta{color:var(--muted); font-size:.92rem}
.section .sec-btn{
  --size:28px; min-width:var(--size); min-height:var(--size); display:grid; place-items:center;
  border-radius:10px; border:2px solid var(--primary); color:var(--primary); background:transparent; font-weight:800; cursor:pointer;
  transition:border-color .18s ease, color .18s ease, transform .12s ease
}
.section .sec-btn.prefer{border-color:var(--accent); color:var(--accent)}
.section .sec-btn.exclude{border-color:var(--danger); color:var(--danger)}
.section .sec-btn.tapped{transform:scale(.92)}

/* Modals */
.modal{border:none; padding:0; background:transparent}
.modal::backdrop{background:rgba(0,0,0,.6); backdrop-filter:blur(2px)}
.modal-card{background:var(--panel); border:1px solid var(--outline); border-radius:16px; box-shadow:var(--shadow); width:min(92vw,520px);}
.modal-header{display:flex; align-items:center; justify-content:space-between; gap:.5rem; padding:1rem 1rem .25rem}
.modal-body{padding:0 1rem 1rem; color:var(--muted); line-height:1.45}
.modal-footer{display:flex; justify-content:flex-end; gap:.5rem; padding:.75rem 1rem 1rem}

/* Info modal emphasis */
#infoModal .modal-header{border-bottom:1px solid var(--outline)}
#infoModal .modal-header h2{font-size:1.3rem; font-weight:800; letter-spacing:.2px; color:var(--text)}

/* Filter modal specific */
.switch{display:flex; align-items:center; gap:.6rem; margin:.5rem 0}
.switch input{width:18px; height:18px}
.range{display:flex; align-items:flex-end; gap:.5rem; margin-top:.5rem}
.range .to{color:var(--muted)}
.range input{width:120px; padding:.5rem .6rem; background:#0f1115; border:1px solid var(--outline); color:var(--text); border-radius:10px}
.range label{display:block; color:var(--muted); font-size:.82rem; margin-bottom:.25rem}

/* Toast */
.toast{position:fixed; inset-inline:0; bottom:16px; display:grid; place-items:center; pointer-events:none}
.toast.show .bubble{animation:pop .2s ease-out, fade 2.5s both}
.bubble{pointer-events:auto; padding:.6rem .9rem; background:#0f1115; color:var(--text); border:1px solid var(--outline); border-radius:999px; box-shadow:var(--shadow)}
@keyframes pop{from{transform:translateY(6px) scale(.98); opacity:0} to{transform:translateY(0) scale(1); opacity:1}}
@keyframes fade{0%,85%{opacity:1} 100%{opacity:0}}

/* Mobile tweaks */
@media (min-width:700px){
  .content{max-width:740px}
}
